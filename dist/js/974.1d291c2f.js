"use strict";(self["webpackChunkazon_kitoblari"]=self["webpackChunkazon_kitoblari"]||[]).push([[974,511],{85511:function(t,e,s){s.r(e),s.d(e,{default:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"card vertical",attrs:{to:{name:"productsId",params:{id:t.product.id}}}},[e("div",{staticClass:"card-tags"},[t.product.discount_percent?e("span",{class:{discount:t.product.discount_percent}},[t._v(" "+t._s(t.product.discount_percent)+" % ")]):t._e(),t.product.type?e("span",{class:t.product.type},[t._v(" "+t._s(t.computedType)+" ")]):t._e()]),t.product.images?e("div",{staticClass:"card-image"},[e("img",{attrs:{src:t.product.images[0],alt:t.product.name}})]):t._e(),e("div",{staticClass:"card-info"},[e("h3",[t._v(t._s(t.product.name))]),t.product.category?.data?e("h4",[e("i",{staticClass:"icon-document"}),t._v(" "+t._s(t.product.category.data.attributes.name)+" ")]):t._e(),e("span",[t._v(" "+t._s(t.sumFormatter(t.product.price))+" "+t._s(t.$t("sum"))+" "),t.product.oldPrice?e("small",[t._v(" "+t._s(t.product.oldPrice)+" "+t._s(t.$t("sum"))+" ")]):t._e()])]),e("div",{staticClass:"card-action"},[t.product.amount?e("button",{staticClass:"card-action-universal",on:{click:function(t){t.preventDefault()}}},[e("i",{staticClass:"icon-minus",on:{click:function(e){return e.preventDefault(),t.changeAmount("minus")}}}),e("span",[t._v(" "+t._s(t.product.amount))]),e("i",{staticClass:"icon-plus",on:{click:function(e){return e.preventDefault(),t.changeAmount("plus")}}})]):e("a-button",{attrs:{block:""},on:{click:function(e){return e.preventDefault(),t.addToBasket()}}},[t._v(" "+t._s(t.$t("card.addBasket"))+" ")])],1)])},i=[],o=s(12636),r=s(90408),c={props:{info:{type:Object,default:()=>({})}},data:()=>({product:{id:null,amount:0}}),methods:{...(0,r.OI)("basket",["setProduct","setAmount"]),addToBasket(){this.product.amount||this.product.amount++,this.setProduct(this.product)},changeAmount(t){"minus"===t?this.product.amount&&this.product.amount--:"plus"===t&&this.product.amount++,this.setAmount({id:this.product.id,amount:this.product.amount})},sumFormatter:o._S},computed:{computedType(){return"popular"==this.product.type?"Mashxur":"new"==this.product.type?"Yangi":""}},mounted(){this.product={...this.product,...this.info},Object.keys(this.product).includes("amount")||(this.product.amount=0)}},d=c,u=s(1001),n=(0,u.Z)(d,a,i,!1,null,null,null),l=n.exports},44974:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});var a=function(){var t=this,e=t._self._c;return t.computedProduct.id?e("div",{staticClass:"pages products-detail"},[e("div",{staticClass:"container"},[e("div",{staticClass:"pages-wrapper"},[e("div",{staticClass:"pages-breadcrumbs"},[e("ul",[e("li",[e("i",{staticClass:"icon-home"}),e("router-link",{attrs:{to:"/"}},[t._v(" "+t._s(t.computedProduct.category)+" ")])],1),e("li",[e("i",{staticClass:"icon-angle-right"}),e("router-link",{attrs:{to:"/"}},[t._v(" "+t._s(t.computedProduct.name)+" ")])],1)])]),e("div",{staticClass:"products-detail-header"},[e("h2",[t._v(t._s(t.computedProduct.title))]),t.computedProduct.reviews?.length?e("div",{staticClass:"products-detail-header-bottom"},[e("div",{staticClass:"products-detail-header-bottom-mark"},[e("Mark",{attrs:{value:t.computedTotalAverageStars}})],1),e("div",{staticClass:"products-detail-header-bottom-comment"},[e("i",{staticClass:"icon-comment"}),e("span",[t._v(t._s(t.$t("title.commentsCount",{num:t.computedProduct.reviews.length})))])])]):t._e()]),e("div",{staticClass:"products-detail-body"},[e("div",{staticClass:"products-detail-body-tab"},[e("div",{staticClass:"products-detail-body-tab-items"},[t.computedProduct.images?e("ul",t._l(t.computedProduct.images,(function(s,a){return e("li",{key:a,on:{click:function(e){return t.onClickTab(a)}}},[e("img",{attrs:{src:s,alt:t.computedProduct.title}})])})),0):t._e()]),e("div",{staticClass:"products-detail-body-tab-image"},[t.computedProduct.images?e("img",{attrs:{src:t.computedProduct.images[t.activeImageIndex],alt:t.computedProduct.title}}):t._e()])]),e("div",{staticClass:"products-detail-body-info"},[e("div",{staticClass:"products-detail-body-info-header"},[t.computedProduct.oldPrice?e("small",[t._v(t._s(t.sumFormatter(t.computedProduct.oldPrice))+" "+t._s(t.$t("sum")))]):t._e(),e("b",[t._v(t._s(t.sumFormatter(t.computedProduct.price))+" "+t._s(t.$t("sum")))]),e("span",{class:{red:!t.computedProduct.in_stock}},[e("i",{staticClass:"icon-shop"}),t._v(" "+t._s(t.computedStock)+" ")]),e("a-row",{attrs:{type:"flex",gutter:[{xl:20,xs:16,sm:16},0]}},[e("a-col",{attrs:{span:"24"}},[0===t.computedProduct.amount?e("a-button",{attrs:{disabled:!t.computedProduct.in_stock},on:{click:t.addToBasket}},[t._v(" "+t._s(t.$t("button.addCart"))+" ")]):e("button",{staticClass:"btn-calculating"},[e("i",{staticClass:"icon-minus",on:{click:function(e){return e.preventDefault(),t.changeAmount("minus")}}}),e("span",[t._v(" "+t._s(t.computedProduct.amount)+" ")]),e("i",{staticClass:"icon-plus",on:{click:function(e){return e.preventDefault(),t.changeAmount("plus")}}})])],1)],1)],1),e("ul",t._l(t.computedProduct.dynamic_properties,(function(s){return e("li",{key:s.id},[e("small",[t._v(t._s(s.key))]),e("i"),e("span",[t._v(t._s(s.value))])])})),0),e("h3",[t._v(t._s(t.$t("products.detail.title")))]),e("p",[t._v(t._s(t.computedProduct.small_description))])])]),e("div",{staticClass:"products-detail-recommend"},[e("h2",[t._v(t._s(t.$t("products.detail.recomend")))]),e("swiper",{attrs:{options:t.recommendOptions}},t._l(t.recommendList,(function(t){return e("swiper-slide",{key:t.id},[e("ProductCard",{attrs:{info:t}})],1)})),1)],1),e("div",{staticClass:"products-detail-about"},[e("h2",[t._v("Tavsif")]),e("p",[t._v(t._s(t.computedProduct.description))])]),e("div",{staticClass:"products-detail-comment"},[e("a-row",{attrs:{type:"flex",gutter:[{xl:24,sm:16,xs:16},{lg:0,sm:16,xs:16}]}},[e("a-col",{attrs:{xl:18,lg:16,sm:24,xs:24}},[e("div",{staticClass:"products-detail-comment-left"},[e("h2",[t._v(" "+t._s(t.$t("products.detail.comment"))+" ")]),t.computedProduct.reviews?.length?e("ul",t._l(t.computedProduct.reviews,(function(s,a){return e("li",{key:a},[e("div",{staticClass:"products-detail-comment-left-header"},[e("h3",[t._v(t._s(s.user?.data?.attributes?.firstName)+" "+t._s(s.user?.data?.attributes?.lastName))]),e("span",[t._v(t._s(t.dateFormatter(s.createdAt)))]),e("Mark",{attrs:{value:s.rating}})],1),e("div",{staticClass:"products-detail-comment-left-body"},[e("p",[t._v(t._s(s.comment))])])])})),0):e("i",[t._v("Izohlar yo'q")])])]),e("a-col",{attrs:{xl:6,lg:8,xs:24,sm:24}},[e("div",{staticClass:"products-detail-comment-right"},[t.computedProduct.reviews?.length?e("div",{staticClass:"products-detail-comment-right-header"},[e("Mark",{attrs:{value:t.computedTotalAverageStars}}),e("span",[t._v(t._s(t.computedTotalAverageStars)+"/5")])],1):t._e(),t.computedProduct.reviews?.length?e("ul",t._l(t.computedStarsList,(function(s,a){return e("li",{key:a},[e("small",[t._v(t._s(5-a)+" yulduz")]),e("i",[e("span",{style:{width:100/t.maxStarValue*s+"%"}})]),e("small",[t._v(t._s(s))])])})),0):t._e(),t.isLoggedIn?e("a-button",{on:{click:t.showModal}},[e("i",{staticClass:"icon-comment"}),t._v(" "+t._s(t.$t("products.detail.commenting"))+" ")]):t._e()],1)])],1)],1)])]),e("a-modal",{staticClass:"mark-modal",attrs:{title:"Izoh qoldirish",visible:t.visible,"confirm-loading":t.confirmLoading,footer:null},on:{cancel:t.handleCancel},scopedSlots:t._u([{key:"closeIcon",fn:function(){return[e("i",{staticClass:"icon-close"})]},proxy:!0}],null,!1,1430148202)},[e("div",{staticClass:"mark-modal-body"},[e("div",{staticClass:"mark-modal-mark"},[e("span",[t._v(t._s(t.$t("products.detail.rating"))+":")]),e("Mark",{model:{value:t.newReview.rating,callback:function(e){t.$set(t.newReview,"rating",e)},expression:"newReview.rating"}})],1),e("a-form-item",{attrs:{label:"Izoh:"}},[e("a-textarea",{attrs:{placeholder:"Izoh qoldiring"},model:{value:t.newReview.comment,callback:function(e){t.$set(t.newReview,"comment",e)},expression:"newReview.comment"}})],1),e("a-button",{attrs:{loading:t.confirmLoading},on:{click:t.handleOk}},[t._v(" "+t._s(t.$t("products.detail.sending"))+" ")])],1)])],1):t._e()},i=[],o=(s(30541),s(90408)),r=s(88621),c=s(12636),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mark"},[e("ul",[t._l(t.value,(function(s){return e("li",{key:s,on:{click:function(e){return t.changeValue(s)}}},[e("svg",{attrs:{width:"20",height:"21",viewBox:"0 0 20 21",fill:"#DA9909",xmlns:"http://www.w3.org/2000/svg"}},[e("g",{attrs:{"clip-path":"url(#clip0_297_3296)"}},[e("path",{attrs:{d:"M9.99986 15.2917L4.85653 17.9958L5.83903 12.2683L1.67236 8.2125L7.42236 7.37917L9.99403 2.16833L12.5657 7.37917L18.3157 8.2125L14.149 12.2683L15.1315 17.9958L9.99986 15.2917Z","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])])])})),t._l(5-+t.value,(function(s){return e("li",{key:s+t.value,on:{click:function(e){return t.changeValue(s+t.value)}}},[e("svg",{attrs:{width:"20",height:"21",viewBox:"0 0 20 21",fill:"#D3D3D3",xmlns:"http://www.w3.org/2000/svg"}},[e("g",{attrs:{"clip-path":"url(#clip0_297_3296)"}},[e("path",{attrs:{d:"M9.99986 15.2917L4.85653 17.9958L5.83903 12.2683L1.67236 8.2125L7.42236 7.37917L9.99403 2.16833L12.5657 7.37917L18.3157 8.2125L14.149 12.2683L15.1315 17.9958L9.99986 15.2917Z","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])])])}))],2)])},u=[],n={props:{value:{type:Number,default:0}},methods:{changeValue(t){this.$emit("input",t)}}},l=n,m=s(1001),p=(0,m.Z)(l,d,u,!1,null,"4e2f9535",null),h=p.exports,v=s(85511),_={components:{Mark:h,ProductCard:v["default"]},data(){return{visible:!1,confirmLoading:!1,added_count:0,recommendOptions:{navigation:{nextEl:".icon-arrow-left",prevEl:".icon-arrow-right"},loop:!0,autoplay:{delay:2500,disableOnInteraction:!1},breakpoints:{1752:{slidesPerView:5,spaceBetween:24},1552:{slidesPerView:4,spaceBetween:24},1200:{slidesPerView:3,spaceBetween:16},992:{slidesPerView:3,spaceBetween:16},768:{slidesPerView:3,spaceBetween:16},0:{slidesPerView:"auto",spaceBetween:16}}},detail:{amount:0},activeImageIndex:0,newReview:{rating:0,comment:""},maxStarValue:0,isLoaded:!1,isReviewSubmitBtnLoading:!1}},computed:{...(0,o.Se)("products",["recommendList"]),...(0,o.Se)("basket",["productsInBasket"]),...(0,o.Se)("auth",["userID","isLoggedIn"]),...(0,o.rn)("preloader",["isPreloaderActive"]),computedStock(){return this.computedProduct.in_stock?"Sotuvda mavjud":"Sotuvda mavjud emas"},computedTotalStars(){if(!this.computedProduct.reviews)return 0;let t=0;return this.computedProduct.reviews.map((e=>{t+=e.rating})),t},computedTotalAverageStars(){return this.computedProduct.reviews?Math.round(this.computedTotalStars/this.computedProduct.reviews.length):0},computedStarsList(){return this.computedProduct.reviews?[this.calculateEqualRatings(1),this.calculateEqualRatings(2),this.calculateEqualRatings(3),this.calculateEqualRatings(4),this.calculateEqualRatings(5)].reverse():0},computedProduct(){if(!this.detail.id)return{};const t={id:this.detail.id,amount:0,...this.detail.attributes},e=(0,c.ol)(this.detail,"images");t.images=e.map((t=>"https://d9a6-45-9-230-35.ngrok.io"+t)),t.category=t.category.data.attributes.name,this.productsInBasket.filter((e=>{e.id===t.id&&(t.amount=e.amount)})),t.discount_percent&&(t.oldPrice=t.price,t.discount=t.oldPrice/100*t.discount_percent,t.price=t.oldPrice-t.discount);const s=t.reviews.data;return s.length>0?t.reviews=s.map((t=>({id:t.id,...t.attributes}))):t.reviews=[],t}},methods:{...(0,o.OI)("basket",["setProduct","setAmount"]),...(0,o.OI)("preloader",["setPreloader"]),sumFormatter:c._S,onClickTab(t){this.activeImageIndex=t},showModal(){this.visible=!0},async handleOk(){if(!this.newReview.comment)return this.$message.error("Fill field");this.confirmLoading=!0,this.newReview.user=String(this.userID),this.newReview.product=this.$route.params.id,await r.Z.reviews.post({data:this.newReview}).then((({data:t})=>{t.data.user.attributes.firstName="Ваш отзыв",this.detail.attributes.reviews.data.unshift(t.data)})).finally((()=>{this.visible=!1,this.confirmLoading=!1}))},handleCancel(){this.visible=!1},addToBasket(){this.computedProduct.amount||this.computedProduct.amount++,this.setProduct(this.computedProduct)},changeAmount(t){"minus"===t?this.computedProduct.amount&&this.computedProduct.amount--:"plus"===t&&this.computedProduct.amount++,this.setAmount({id:this.computedProduct.id,amount:this.computedProduct.amount})},async getProduct(){const{data:t}=await r.Z.products.getSingle(this.$route.params.id,{populate:["images","category","dynamic_properties","reviews.user"]});this.detail=t.data},calculateEqualRatings(t){let e=0;return this.computedProduct.reviews.filter((s=>{s.rating===+t&&e++})),this.maxStarValue<e&&(this.maxStarValue=e),e},dateFormatter:c.vh},mounted(){this.setPreloader(!0),this.getProduct().finally((()=>{this.setPreloader(!1),this.isLoaded=!0}))}},g=_,w=(0,m.Z)(g,a,i,!1,null,null,null),f=w.exports}}]);
//# sourceMappingURL=974.1d291c2f.js.map